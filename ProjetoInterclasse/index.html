<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interclasse - ETEC CT</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <nav>
        <div class="DivbotaoNav">
            <div class="nav-left">
                <img src="./img/interclasse 1.png" alt="Logo Interclasse" class="LogoInterclasse">
                <a href="" class="botoesNav">EQUIPES</a>
                <a href="" class="botoesNav">CLASSIFICA√á√ÉO</a>
                <a href="" class="botoesNav">RESULTADOS</a>
                <a href="" class="botoesNav">ARTILHARIA</a>
                <!-- No nav-left, adicione: -->
                <a href="./telas/admin.html" class="botoesNav" style="color: #ff4444;">ADMIN</a>
            </div>

            <!-- Agrupamento √† direita: logo + login -->
            <div class="nav-right">
                <div class="login">
                    <div id="user-info" style="display: none; align-items: center; gap: 15px;">
                        <span id="user-name" style="color: white; font-family: 'HK', sans-serif; font-size: 14px;"></span>
                        <button id="btn-logout" class="btn-login" style="background: none; border: none; color: white; cursor: pointer; font-family: 'HK', sans-serif; padding: 6px 12px; border: 1px solid #2fbf4a; border-radius: 4px;">
                            Sair
                        </button>
                    </div>
                    <div id="login-section">
                        <a href="./telas/login.html"> 
                            <button class="btn-login">
                                <img src="./img/872944 1.png" alt="√çcone Login" class="img-login">LOGIN
                            </button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <div class="divPrincipal">
        <div class="divLogoTitulo">
            <div class="logoExplicacoes">
                <div>
                    <img src="./img/LogoJaguar.png" alt="" class="LogoJaguar">
                </div>
                <div class="TextosLogos">
                    <h1 class="tituloPrincipal">INTERCURSO</h1>
                    <h1 class="tituloPrincipal">ETEC CT</h1>
                    <h2 class="tituloPrincipal1">PREPARE-SE</h2>
                </div>
            </div>

            <div class="divtexto">
                <h3>No dia 2 de dezembro, vai rolar o torneio de futsal abrindo o nosso Interclasse de 2025! Vai ser um dia cheio de jogos insanos, muita torcida, rivalidade saud√°vel e, claro, aquele clima de amizade que faz o interclasse ser especial. As turmas v√£o entrar em quadra pra mostrar ra√ßa, entrosamento e quem realmente manda na bola. O foco √© competir com respeito, jogar limpo e aproveitar cada momento ‚Äî porque mais do que vencer, o importante √© fazer parte dessa festa do esporte. Ent√£o j√° se prepara, traz a torcida, veste a camisa e vem vibrar com a gente, porque o dia 2 vai ser s√≥ futsal e emo√ß√£o! 
                </h3>
                <button class="btn-ver"><img src="./img/ver-detalhes.png" alt="" class="img-ver"></button>
            </div>
        </div>

        <div class="divEquipesParticipantes">
            <h2>EQUIPES PARTICIPANTES</h2>
        </div>
    </div>

    <script>
        // Sistema de gerenciamento de sess√£o para a p√°gina inicial
        class SessionManager {
            constructor() {
                this.currentUser = null;
                this.loadSession();
            }

            loadSession() {
                try {
                    // Tentar sessionStorage primeiro
                    let userData = sessionStorage.getItem('currentUser');
                    if (!userData) {
                        // Se n√£o tiver, tentar localStorage
                        userData = localStorage.getItem('currentUser');
                        if (userData) {
                            // Copiar para sessionStorage
                            sessionStorage.setItem('currentUser', userData);
                        }
                    }
                    
                    if (userData) {
                        this.currentUser = JSON.parse(userData);
                        console.log('‚úÖ Sess√£o carregada:', this.currentUser);
                    } else {
                        console.log('‚ÑπÔ∏è Nenhuma sess√£o encontrada');
                    }
                } catch (error) {
                    console.error('‚ùå Erro ao carregar sess√£o:', error);
                    this.clearSession();
                }
            }

            isLoggedIn() {
                return this.currentUser !== null && this.currentUser.name && this.currentUser.name !== 'undefined';
            }

            getUserName() {
                return this.currentUser ? this.currentUser.name : '';
            }

            clearSession() {
                this.currentUser = null;
                sessionStorage.removeItem('currentUser');
                localStorage.removeItem('currentUser');
                console.log('üóëÔ∏è Sess√£o limpa');
            }
        }

        // Atualizar navbar baseado no login
        function updateNavbar() {
            const userInfo = document.getElementById('user-info');
            const loginSection = document.getElementById('login-section');
            const userName = document.getElementById('user-name');
            const btnLogout = document.getElementById('btn-logout');

            const sessionManager = new SessionManager();
            
            console.log('üîÑ Atualizando navbar...');
            console.log('Usu√°rio logado:', sessionManager.isLoggedIn());
            console.log('Dados do usu√°rio:', sessionManager.currentUser);

            if (sessionManager.isLoggedIn()) {
                const name = sessionManager.getUserName();
                console.log('üë§ Nome do usu√°rio:', name);
                
                userName.textContent = `Ol√°, ${name}`;
                userInfo.style.display = 'flex';
                loginSection.style.display = 'none';
                console.log('‚úÖ Navbar atualizada: usu√°rio logado');
            } else {
                userInfo.style.display = 'none';
                loginSection.style.display = 'block';
                console.log('‚úÖ Navbar atualizada: usu√°rio n√£o logado');
            }

            // Configurar logout
            if (btnLogout) {
                // Remover event listeners anteriores para evitar duplica√ß√£o
                btnLogout.replaceWith(btnLogout.cloneNode(true));
                const newBtnLogout = document.getElementById('btn-logout');
                
                newBtnLogout.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('üö™ Fazendo logout...');
                    sessionManager.clearSession();
                    // For√ßar recarregamento para garantir que a navbar atualize
                    window.location.href = 'index.html';
                });
            }
        }

        // Executar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina inicial carregada');
            updateNavbar();
        });

        // Tamb√©m executar quando a p√°gina for focada (caso tenha feito login em outra aba)
        window.addEventListener('focus', function() {
            console.log('üëÄ P√°gina focada, verificando sess√£o...');
            updateNavbar();
        });

        // Verificar a cada 2 segundos por mudan√ßas na sess√£o (apenas para debug)
        setInterval(() => {
            const userData = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
            if (userData) {
                console.log('‚è∞ Verifica√ß√£o peri√≥dica - Usu√°rio ainda logado');
            }
        }, 2000);
    </script>
</body>
</html>